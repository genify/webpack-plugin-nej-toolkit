<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>NEJ Module Sample - 前端实例</title>
    <!-- @STYLE{core:false} -->
    <link href="../css/template.css" rel="stylesheet" type="text/css"/>
    <link href="../css/app.css" rel="stylesheet" type="text/css"/>
  </head>
  <body id="www-wd-com">
  
    <div class="g-doc">
      <div class="g-hd">
        <h1 class="m-logo">网易-杭研院-前端技术组-实例库</h1>
        <h2 class="m-title">NEJ Module Sample</h2>
      </div>
      <div class="g-bd" id="module-box"></div>
      <div class="g-bd">
        <div class="m-foot">
        	如有任何问题，请联系：蔡剑飞(<a href="mailto:caijf@corp.netease.com">caijf@corp.netease.com</a>)
        </div>
      </div>
      <div class="g-ft">
        <div class="m-foot">
        	&nbsp;&copy;&nbsp;网易-杭研院-前端技术组
        </div>
      </div>
    </div>
    
    <div id="template-box" style="display:none;">
      <!-- @TEMPLATE -->
      <textarea name="html" data-src="module/tab/index.html"></textarea>
      <textarea name="html" data-src="module/layout/system/index.html"></textarea>
      <textarea name="html" data-src="module/layout/blog/index.html"></textarea>
      <textarea name="html" data-src="module/layout/blog.list/index.html"></textarea>
      <textarea name="html" data-src="module/layout/setting/index.html"></textarea>
      <textarea name="html" data-src="module/layout/setting.account/index.html"></textarea>
      <textarea name="html" data-src="module/blog/tag/index.html"></textarea>
      <!-- /@TEMPLATE -->
      <!-- @MODULE -->
      <textarea name="html" data-src="module/blog/tab/index.html"></textarea>
      <textarea name="html" data-src="module/blog/list.box/index.html"></textarea>
      <textarea name="html" data-src="module/blog/list.tag/index.html"></textarea>
      <textarea name="html" data-src="module/blog/list/index.html"></textarea>
      <textarea name="html" data-src="module/setting/tab/index.html"></textarea>
      <textarea name="html" data-src="module/setting/account.tab/index.html"></textarea>
      <!-- /@MODULE -->
    </div>
    
    <!-- @IGNORE -->
    <script>window.DEBUG = !0;</script>
    <script src="../javascript/cache/tag.data.js"></script>
    <script src="../javascript/cache/blog.data.js"></script>
    <!-- /@IGNORE -->
    
    <!-- @VERSION -->
    <script>location.config={root:'./'};</script>
    <!-- @DEFINE {inline:true} -->
    <script src="http://nej.netease.com/nej/src/define.js"></script>
    <script>
      define([
          '{lib}util/dispatcher/dispatcher.2.js',
          '{lib}util/encode/md5.js'
      ],
      function(){
          var _  = NEJ.P;
          /* start up dispatcher */
          _('nej.e')._$startup({
              rules:{
                  rewrite:{
                      '404':'/m/blog/list/',
                      '/m/blog/list/':'/m/blog/',
                      '/m/setting/account/':'/m/setting/'
                  },
                  title:{
                      '/m/blog/tag/':'日志标签',
                      '/m/blog/list/':'日志列表',
                      '/m/setting/permission/':'权限管理',
                      '/m/setting/account/':'基本资料',
                      '/m/setting/account/edu/':'教育经历'
                  },
                  alias:{
                      'system-tab':'/?/tab/',
                      'blog-tab':'/?/blog/tab/',
                      'blog-list-box':'/?/blog/box/',
                      'blog-list-tag':'/?/blog/tag/',
                      'blog-list':'/?/blog/list/',
                      'setting-tab':'/?/setting/tab/',
                      'setting-account-tab':'/?/setting/account/tab/',
                      
                      'layout-system':'/m',
                      'layout-blog':'/m/blog',
                      'layout-blog-list':'/m/blog/list/',
                      'layout-setting':'/m/setting',
                      'layout-setting-account':'/m/setting/account',
                      
                      'blog-tag':['/m/blog/tag/','/m/setting/tag/'],
                      'setting-edu':'/m/setting/account/edu/',
                      'setting-profile':'/m/setting/account/',
                      'setting-permission':'/m/setting/permission/'
                  }
              },
              modules:{
                  '/?/tab/':'module/tab/index.html',
                  '/?/blog/tab/':'module/blog/tab/index.html',
                  '/?/blog/box/':'module/blog/list.box/index.html',
                  '/?/blog/tag/':'module/blog/list.tag/index.html',
                  '/?/blog/list/':'module/blog/list/index.html',
                  '/?/setting/tab/':'module/setting/tab/index.html',
                  '/?/setting/account/tab/':'module/setting/account.tab/index.html',
                  
                  '/m':{
                      module:'module/layout/system/index.html',
                      composite:{
                          tab:'/?/tab/'
                      }
                  },
                  '/m/blog':{
                      module:'module/layout/blog/index.html',
                      composite:{
                          tab:'/?/blog/tab/'
                      }
                  },
                  '/m/blog/list/':{
                      module:'module/layout/blog.list/index.html',
                      composite:{
                          box:'/?/blog/box/',
                          tag:'/?/blog/tag/',
                          list:'/?/blog/list/'
                      }
                  },
                  '/m/blog/tag/':'module/blog/tag/index.html',
                  
                  '/m/setting':{
                      module:'module/layout/setting/index.html',
                      composite:{
                          tab:'/?/setting/tab/'
                      }
                  },
                  '/m/setting/account':{
                      module:'module/layout/setting.account/index.html',
                      composite:{
                          tab:'/?/setting/account/tab/'
                      }
                  },
                  '/m/setting/account/':'module/setting/profile/index.html',
                  '/m/setting/account/edu/':'module/setting/edu/index.html',
                  '/m/setting/permission/':'module/setting/permission/index.html',
                  '/m/setting/tag/':'module/blog/tag/index.html'
              },
              /*
              modules:{
                  '/?/tab/':'module/tab/index.html',
                  '/?/blog/tab/':'module/blog.html',
                  '/?/blog/box/':'module/blog.html',
                  '/?/blog/tag/':'module/blog.html',
                  '/?/blog/list/':'module/blog.html',
                  '/?/setting/tab/':'module/setting.html',
                  '/?/setting/account/tab/':'module/setting.html',
                  
                  '/m':{
                      module:'module/layout.html',
                      composite:{
                          tab:'/?/tab/'
                      }
                  },
                  '/m/blog':{
                      module:'module/layout.html',
                      composite:{
                          tab:'/?/blog/tab/'
                      }
                  },
                  '/m/blog/list/':{
                      module:'module/layout.html',
                      composite:{
                          box:'/?/blog/box/',
                          tag:'/?/blog/tag/',
                          list:'/?/blog/list/'
                      }
                  },
                  '/m/blog/tag/':'module/blog.html',
                  
                  '/m/setting':{
                      module:'module/layout.html',
                      composite:{
                          tab:'/?/setting/tab/'
                      }
                  },
                  '/m/setting/account':{
                      module:'module/layout.html',
                      composite:{
                          tab:'/?/setting/account/tab/'
                      }
                  },
                  '/m/setting/account/':'module/setting.html',
                  '/m/setting/account/edu/':'module/setting.html',
                  '/m/setting/permission/':'module/setting.html'
              },
              */
              onbeforechange:function(_options){
                  var _umi = _options.path||'';
                  if (!!_umi&&
                        _umi.indexOf('/?')<0&&
                        _umi.indexOf('/m')<0)
                      _options.path = '/m'+_umi;
              }
          });
      });
    </script>
  </body>
</html>